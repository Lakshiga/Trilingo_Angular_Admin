<div class="activity-form-container">
  <div class="title-row">
    <app-multilingual-input
      [label]="'Activity Name'"
      [value]="getTitleValue()"
      [placeholder]="getTitlePlaceholder()"
      [required]="true"
      [showCompletionIndicator]="false"
      (valueChange)="onTitleChange($event)">
    </app-multilingual-input>
  </div>

  <div class="form-row">
    <div class="form-field">
      <label>Sequence Number</label>
      <mat-form-field appearance="outline" class="w-full">
        <input
          matInput
          type="number"
          placeholder="Enter sequence number"
          [(ngModel)]="activityData.sequenceOrder"
          (ngModelChange)="onDataChange()"
          required>
      </mat-form-field>
    </div>

    <div class="form-field">
      <label>Main Activity Type</label>
      <mat-form-field appearance="outline" class="w-full">
        <mat-select
          [(ngModel)]="activityData.mainActivityId"
          (selectionChange)="onMainActivityChange($event)"
          required>
          <mat-option [value]="null">Select Main Activity</mat-option>
          <mat-option *ngFor="let ma of mainActivities" [value]="ma.id">
            {{ ma.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="form-field">
      <label>Activity Type</label>
      <mat-form-field appearance="outline" class="w-full">
        <mat-select
          [(ngModel)]="activityData.activityTypeId"
          (selectionChange)="onActivityTypeChange($event)"
          [disabled]="hasExercises || !activityData.mainActivityId"
          required>
          <mat-option [value]="null">Select Activity Type</mat-option>
          <mat-option *ngFor="let at of activityTypes" [value]="at.activityTypeId">
            {{ at.activityName }}
          </mat-option>
        </mat-select>
        <mat-hint *ngIf="hasExercises">
          Activity type cannot be changed when exercises exist. Delete all exercises to change activity type.
        </mat-hint>
        <mat-hint *ngIf="!hasExercises && !activityData.mainActivityId">
          Please select a Main Activity first
        </mat-hint>
        <mat-hint *ngIf="!hasExercises && activityData.mainActivityId && (!activityTypes || activityTypes.length === 0)">
          Loading activity types...
        </mat-hint>
      </mat-form-field>
    </div>
  </div>
</div>
