<div class="mt-8 pt-8 border-t-2 border-gray-300">
  
  <mat-card class="p-6 bg-gray-50">
    <div class="mb-6">
      <h2 class="text-2xl font-bold text-indigo-700 mb-2">{{ getPreviewTitle() }}</h2>
      <p class="text-gray-600">{{ getPreviewInstruction() }}</p>
    </div>

    <div class="grid grid-cols-2 gap-6">
      <div>
        <h4 class="text-lg font-semibold mb-3 text-indigo-600 pb-2 border-b-2 border-indigo-300">
          Side A
        </h4>
        <div class="space-y-3">
          @if (getSideACards().length === 0) {
            <p class="text-gray-400 italic text-sm">No cards yet</p>
          }
          @for (card of getSideACards(); track card.id || $index) {
            <mat-card class="p-3 border-l-4 border-indigo-500 bg-white shadow-md">
              
              @if (card.type === 'text') {
                <div class="p-3 bg-gray-50 rounded text-center">
                  <p class="text-lg font-medium">{{ getCardDisplayContent(card) || '(Text Content)' }}</p>
                </div>
              }
              
              @if (card.type === 'image') {
                <div class="p-2 bg-gray-50 rounded media-box">
                  @if (getCardMediaUrl(card)) {
                    <img [src]="getCardMediaUrl(card)" 
                          [alt]="getCardDisplayContent(card)" 
                          class="card-image"
                          (error)="onImageError($event)">
                  } @else {
                    <div class="media-fallback">
                      <span class="text-gray-400">No image URL</span>
                    </div>
                  }
                </div>
              }
              
              @if (card.type === 'audio') {
                <div class="p-3 bg-gray-50 rounded media-box">
                  @if (getCardMediaUrl(card)) {
                    <audio [src]="getCardMediaUrl(card)" controls class="w-full mb-2"></audio>
                  } @else {
                    <div class="media-fallback">
                      <span class="text-gray-400">No audio URL</span>
                    </div>
                  }
                  <p class="text-sm font-medium text-center truncate">{{ getCardDisplayContent(card) || '(Audio Label)' }}</p>
                </div>
              }
            </mat-card>
          }
        </div>
      </div>

      <div>
        <h4 class="text-lg font-semibold mb-3 text-green-600 pb-2 border-b-2 border-green-300">
          Side B
        </h4>
        <div class="space-y-3">
          @if (getSideBCards().length === 0) {
            <p class="text-gray-400 italic text-sm">No cards yet</p>
          }
          @for (card of getSideBCards(); track card.id || $index) {
            <mat-card class="p-3 border-l-4 border-green-500 bg-white shadow-md">
              
              @if (card.type === 'text') {
                <div class="p-3 bg-gray-50 rounded text-center">
                  <p class="text-lg font-medium">{{ getCardDisplayContent(card) || '(Text Content)' }}</p>
                </div>
              }
              
              @if (card.type === 'image') {
                <div class="p-2 bg-gray-50 rounded media-box">
                  @if (getCardMediaUrl(card)) {
                    <img [src]="getCardMediaUrl(card)" 
                          [alt]="getCardDisplayContent(card)" 
                          class="card-image"
                          (error)="onImageError($event)">
                  } @else {
                    <div class="media-fallback">
                      <span class="text-gray-400">No image URL</span>
                    </div>
                  }
                </div>
              }
              
              @if (card.type === 'audio') {
                <div class="p-3 bg-gray-50 rounded media-box">
                  @if (getCardMediaUrl(card)) {
                    <audio [src]="getCardMediaUrl(card)" controls class="w-full mb-2"></audio>
                  } @else {
                    <div class="media-fallback">
                      <span class="text-gray-400">No audio URL</span>
                    </div>
                  }
                  <p class="text-sm font-medium text-center truncate">{{ getCardDisplayContent(card) || '(Audio Label)' }}</p>
                </div>
              }
            </mat-card>
          }
        </div>
      </div>
    </div>
    
  </mat-card>
</div>