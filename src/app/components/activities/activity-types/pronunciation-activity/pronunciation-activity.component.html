<div class="flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white px-6 py-10">

    <!-- Title -->
    <h2 class="text-2xl font-bold mb-2 text-center">
      {{ text(content?.title) }}
    </h2>
  
    <!-- Instruction -->
    <p class="text-sm text-gray-600 dark:text-gray-300 mb-8 text-center">
      {{ text(content?.instruction) }}
    </p>
  
    <!-- Task Section -->
    <div class="bg-white dark:bg-gray-800 shadow-lg rounded-2xl p-6 w-full max-w-md text-center">
  
      <!-- Image Display (if available) -->
      <div *ngIf="currentTask()?.content?.imageUrl" class="flex justify-center mb-4">
        <img [src]="getTargetImagePath()" alt="target" class="w-32 h-32 rounded-xl object-contain shadow-md" />
      </div>

      <!-- Word Display -->
      <div *ngIf="!currentTask()?.content?.imageUrl" class="text-3xl font-semibold mb-4">
        {{ getTargetWord() }}
      </div>
  
      <!-- Audio Listen Button (if available) -->
      <div *ngIf="getTargetAudioPath()" class="mb-6">
        <button (click)="playSound()" class="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow">
          <mat-icon>volume_up</mat-icon>
          <span>Listen</span>
        </button>
      </div>
  
      <!-- Recording Buttons -->
      <div class="flex flex-col items-center gap-4">
        <button
          *ngIf="!isRecording()"
          (click)="startRecording()"
          class="flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-full shadow transition-all duration-200"
        >
          <mat-icon>mic</mat-icon>
          <span>Start Recording</span>
        </button>
  
        <button
          *ngIf="isRecording()"
          (click)="stopRecording()"
          class="flex items-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-full shadow animate-pulse transition-all duration-200"
        >
          <mat-icon>stop</mat-icon>
          <span>Stop Recording</span>
        </button>
  
        <!-- Loading / Checking State -->
        <div *ngIf="isChecking()" class="text-blue-500 text-sm animate-pulse">
          Checking pronunciation...
        </div>
  
        <!-- Error Message -->
        <div *ngIf="recordingError()" class="text-red-500 text-sm mt-2">
          {{ recordingError() }}
        </div>
  
        <!-- Score Result -->
        <div *ngIf="scoreResult()" class="bg-gray-100 dark:bg-gray-700 rounded-lg p-4 mt-4 w-full">
          <h3 class="text-lg font-semibold mb-2">Result</h3>
          <p><span class="font-medium">Recognized:</span> {{ scoreResult()?.recognizedText }}</p>
          <p><span class="font-medium">Score:</span> {{ scoreResult()?.score }}%</p>
          <p>
            <span class="font-medium">Correct:</span>
            <span [class.text-green-500]="scoreResult()?.isCorrect" [class.text-red-500]="!scoreResult()?.isCorrect">
              {{ scoreResult()?.isCorrect ? '✅ Yes' : '❌ No' }}
            </span>
          </p>
        </div>
  
        <!-- Next Button -->
        <button
          (click)="goToNextTask()"
          class="mt-6 flex items-center gap-2 px-5 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg shadow transition"
        >
          <mat-icon>arrow_forward</mat-icon>
          <span>Next</span>
        </button>
      </div>
    </div>
  </div>
  