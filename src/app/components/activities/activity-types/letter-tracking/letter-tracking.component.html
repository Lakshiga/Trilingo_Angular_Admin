<div class="lt-screen">
  <div class="lt-frame">
    <!-- Header Section -->
    <div class="lt-header">
      <div class="lt-back">
        <span class="lt-arrow">←</span>
      </div>
      <div class="lt-title-wrap">
        <h1 class="lt-title">{{ text(content.title) }}</h1>
        <p class="lt-subtitle">{{ text(content.instruction) }}</p>
      </div>
    </div>

    <!-- Language Tabs Section (Derived from Answers) -->
    <div class="lt-section">
      <div class="lt-section-title">Select Language</div>
      <div class="lt-lang-toggle">
        @for (tab of languageTabs(); track tab.code) {
          <button
            class="lt-lang-btn"
            type="button"
            [class.active]="tab.code === selectedLangTab()"
            (click)="selectTab(tab.code)"
          >
            {{ tab.label }}
          </button>
        }
      </div>
    </div>

    <!-- Letters Grid -->
    <div class="lt-letters">
      <div class="lt-letter-grid">
        @for (tile of currentTiles(); track tile.id) {
          <button
            type="button"
            class="lt-letter-card"
            [class.active]="tile.id === activeTile()?.id"
            (click)="selectTile(tile)"
          >
            <!-- getGlyph uses the current Tab to pick correct char from content -->
            <span>{{ getGlyph(tile) }}</span> 
          </button>
        }
      </div>
    </div>

    <!-- Tracing Area -->
    <div class="lt-trace-pane">
      <div class="lt-trace-header">
        <div class="lt-chip">{{ getGlyph(activeTile()) }}</div>
        <div class="lt-trace-meta">
          <div class="lt-trace-title">Trace Here</div>
          <div class="lt-trace-sub">வரைந்து பழகவும்</div>
        </div>
        <div class="lt-score">Score: {{ score() }} / 10</div>
        <button class="lt-reset" type="button" (click)="clearDrawing()">Reset</button>
      </div>
      
      <div class="lt-canvas-wrap">
        <canvas
          #traceCanvas
          class="lt-canvas"
          touch-action="none"
          (pointerdown)="startDrawing($event)"
          (pointermove)="draw($event)"
          (pointerup)="endDrawing()"
          (pointercancel)="endDrawing()"
          (pointerleave)="endDrawing()"
        ></canvas>
      </div>
    </div>
  </div>
</div>